<!DOCTYPE html>
<html>
<head>
    <title>Auto Login - AIMS Readiness</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: #f5f5f5; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .success { color: #28a745; font-weight: bold; }
        .info { color: #17a2b8; }
        .step { margin: 20px 0; padding: 15px; background: #f8f9fa; border-left: 4px solid #007bff; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîë Configura√ß√£o Autom√°tica da API Key</h1>
        
        <div class="step">
            <h3>Passo 1: Configurando API Key</h3>
            <p id="status">Configurando...</p>
        </div>
        
        <div class="step">
            <h3>Passo 2: Verificando Dados</h3>
            <p id="data-status">Verificando...</p>
        </div>
        
        <div class="step">
            <h3>Passo 3: Redirecionando</h3>
            <p id="redirect-status">Aguarde...</p>
        </div>
        
        <script>
            // Configurar API key
            localStorage.setItem('apiKey', 'dev-aims-demo-key');
            document.getElementById('status').innerHTML = '<span class="success">‚úÖ API Key configurada: dev-aims-demo-key</span>';
            
            // Verificar se h√° dados no backend
            fetch('http://localhost:8002/systems', {
                headers: { 'X-API-Key': 'dev-aims-demo-key' }
            })
            .then(response => response.json())
            .then(data => {
                if (data.length > 0) {
                    document.getElementById('data-status').innerHTML = `<span class="success">‚úÖ ${data.length} sistema(s) encontrado(s)</span>`;
                } else {
                    document.getElementById('data-status').innerHTML = '<span class="info">‚ÑπÔ∏è Nenhum sistema encontrado - use o onboarding para criar</span>';
                }
            })
            .catch(error => {
                document.getElementById('data-status').innerHTML = '<span style="color: #dc3545;">‚ùå Erro ao verificar dados</span>';
            });
            
            // Redirecionar ap√≥s 3 segundos
            setTimeout(() => {
                document.getElementById('redirect-status').innerHTML = '<span class="success">‚úÖ Redirecionando para o dashboard...</span>';
                window.location.href = 'http://localhost:3002/';
            }, 3000);
        </script>
    </div>
</body>
</html>
